
//var apiKey = "6e06812aeffe12f5ac01e38127f2c4fe";
var locationname = document.getElementById("locationName");
var hightemp = document.getElementById("highTemp");
var lowtemp = document.getElementById("lowTemp");
var currenttemp = document.getElementById("curTemp");

function getWeather(location) {
    var apiKey = "6e06812aeffe12f5ac01e38127f2c4fe";
    if (!isNaN(location)) {
        locationkey = "zip";
        //console.log("this is a zipcode");
    } else {
        locationkey = "q"
    }

    if (location != "") {

        fetch('http://api.openweathermap.org/data/2.5/weather?' + locationkey + '=' + location + '&units=imperial&appid=' + apiKey)
            .then(function (response) {
                if (response.ok) {
                    console.log(response);
                    return response.json();
                }
            })
            .then(function (result) {
                jsonFile = result;
                console.log(jsonFile);
                return jsonFile;
            })
            .then((data) => {
                var resultObj = data;
                return displayOutput(resultObj);
            })
    }
    //return displayOutput(resultObj);
}

function displayOutput(resultObj) {

    // let locationname = document.getElementById("locationName");
    // let hightemp = document.getElementById("highTemp");
    // let lowtemp = document.getElementById("lowTemp");

    locationname.innerText = resultObj.name;
    hightemp.innerText = resultObj.main.temp_max;
    lowtemp.innerText = resultObj.main.temp_min;
    currenttemp.innerText = resultObj.main.temp;
}

function FahToCel(location) {

    var apiKey = "6e06812aeffe12f5ac01e38127f2c4fe";
    if (!isNaN(location)) {
        locationkey = "zip";
        //console.log("this is a zipcode");
    } else {
        locationkey = "q"
    }

    if (location != "") {

        fetch('http://api.openweathermap.org/data/2.5/weather?' + locationkey + '=' + location + '&units=imperial&appid=' + apiKey)
            .then(function (response) {
                if (response.ok) {
                    console.log(response);
                    return response.json();
                }
            })
            .then(function (result) {
                jsonFile = result;
                console.log(jsonFile);
                return jsonFile;
            })
            .then((data) => {
                var resultObj1 = data;
                var max_temp = resultObj.main.temp_max;
                var min_temp = resultObj.main.temp_max;
                var current_temp = resultObj.main.temp;

                hightemp.innerText = Math.round(max_temp * 9 / 5) + 32;
                lowtemp.innerText = Math.round(min_temp * 9 / 5) + 32;
                currenttemp.innerText = Math.round(current_temp * 9 / 5) + 32;
            })
    }

    
}

function CelToFah(location) {

    var apiKey = "6e06812aeffe12f5ac01e38127f2c4fe";
    if (!isNaN(location)) {
        locationkey = "zip";
        //console.log("this is a zipcode");
    } else {
        locationkey = "q"
    }

    if (location != "") {

        fetch('http://api.openweathermap.org/data/2.5/weather?' + locationkey + '=' + location + '&units=imperial&appid=' + apiKey)
            .then(function (response) {
                if (response.ok) {
                    console.log(response);
                    return response.json();
                }
            })
            .then(function (result) {
                jsonFile = result;
                console.log(jsonFile);
                return jsonFile;
            })
            .then((data) => {
                var resultObj1 = data;
                var max_temp = resultObj.main.temp_max;
                var min_temp = resultObj.main.temp_max;
                var current_temp = resultObj.main.temp;

                hightemp.innerText = Math.round(max_temp - 32) * 5 / 9;
                lowtemp.innerText = Math.round(min_temp - 32) * 5 / 9;
                currenttemp.innerText = Math.round(current_temp - 32) * 5 / 9;
            })
    }

    
}


